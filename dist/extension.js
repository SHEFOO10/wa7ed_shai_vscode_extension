"use strict";var x=Object.create;var f=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var B=(o,t)=>{for(var a in t)f(o,a,{get:t[a],enumerable:!0})},h=(o,t,a,m)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of P(t))!R.call(o,r)&&r!==a&&f(o,r,{get:()=>t[r],enumerable:!(m=N(t,r))||m.enumerable});return o};var v=(o,t,a)=>(a=o!=null?x($(o)):{},h(t||!o||!o.__esModule?f(a,"default",{value:o,enumerable:!0}):a,o)),T=o=>h(f({},"__esModule",{value:!0}),o);var j={};B(j,{activate:()=>k,deactivate:()=>q});module.exports=T(j);var e=v(require("vscode")),C=v(require("path")),g=require("child_process"),l;function k(o){console.log("Shai Reminder is active!");let t=()=>e.workspace.getConfiguration("shaiReminder"),a=()=>{let s=t().get("customSoundPath");return s&&s.trim()!==""?s:C.join(o.extensionPath,"assets","wa7ed_shai.wav")},m=()=>{let n=a(),s=process.platform,i=(c=>s==="win32"?c.replace(/'/g,"''"):`"${c.replace(/"/g,'\\"')}"`)(n);if(s==="win32"){let c=`powershell -NoProfile -Command "& { (New-Object System.Media.SoundPlayer '${i}').PlaySync() }"`;(0,g.exec)(c);return}let p=s==="darwin"?[`afplay ${i}`]:[`paplay ${i}`,`aplay ${i}`,`play ${i}`,`ffplay -nodisp -autoexit ${i}`],w=c=>{c>=p.length||(0,g.exec)(p[c],b=>{b&&w(c+1)})};w(0)},r=()=>{let n=t(),s=n.get("intervalMinutes")??30,d=n.get("showNotifications");l&&clearInterval(l),l=setInterval(()=>{d&&e.window.showInformationMessage(" \u0642\u0648\u0645 \u0627\u0639\u0645\u0644\u0643 \u0643\u0648\u0628\u0627\u064A\u0647 \u0634\u0627\u064A \u2615"),m()},s*60*1e3)};r(),e.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration("shaiReminder")&&r()});let S=e.commands.registerCommand("shai-reminder.playNow",()=>{e.window.showInformationMessage("\u{1F4E2} Manual Shai Reminder!"),m()}),y=e.commands.registerCommand("shai-reminder.setInterval",async()=>{let n=t().get("intervalMinutes")??30,s=await e.window.showInputBox({prompt:"Enter reminder interval in minutes",value:n.toString(),validateInput:d=>{let i=parseInt(d);return isNaN(i)||i<30||i>240?"\u0645\u0639\u0627\u0643 \u0645\u0646 30 \u062F\u0642\u064A\u0642\u0629 \u0644\u062D\u062F 240 \u062F\u0642\u064A\u0642\u0629 (4 \u0633\u0627\u0639\u0627\u062A)":null}});if(s){let d=parseInt(s);await t().update("intervalMinutes",d,e.ConfigurationTarget.Global),e.window.showInformationMessage(` \u0643\u0644 ${d} \u062F\u0642\u064A\u0642\u0629 \u0647\u064A\u0641\u0643\u0631\u0643 \u062A\u0634\u0631\u0628 \u0634\u0627\u064A \u2615`)}}),I=e.commands.registerCommand("shai-reminder.openSettings",async()=>{await e.commands.executeCommand("workbench.action.openSettings","@ext:SherifHamdy.wa7ed-shai")}),M=e.commands.registerCommand("shai-reminder.chooseCustomSound",async()=>{let n=await e.window.showOpenDialog({canSelectMany:!1,openLabel:"Choose Custom Sound",filters:{"Audio Files":["wav","mp3"]}});n&&n[0]&&(t().update("customSoundPath",n[0].fsPath,e.ConfigurationTarget.Global),e.window.showInformationMessage("\u2705 Custom sound saved!"))}),u=e.window.createStatusBarItem(e.StatusBarAlignment.Right,100);u.text="\u2615 \u0634\u0627\u064A",u.tooltip="Play Shai Reminder Now",u.command="shai-reminder.playNow",u.show(),o.subscriptions.push(S,y,I,M,u)}function q(){l&&clearInterval(l)}0&&(module.exports={activate,deactivate});
